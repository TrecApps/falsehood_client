<h2>Institution</h2>

<div *ngIf="!createNew">

<div>

  <button *ngIf="token.credit >= 35" class="btn bg-info" (click)="startCreateNew()">Create New</button>

  <label>Search Institution</label>
  <input type="search" (change)="onSearchUpdate($event)" [(ngModel)]="searchText" placeholder="Search Institution">

  <ul *ngFor="let inst of searchInst">
    <li (click)="getInst(inst.id)">Institution: {{inst.name}}</li>
  </ul>
</div>

<div *ngIf="mainInst">
  <h3>Title: {{mainInst.institution.name}}</h3>

  <button class="btn bg-info" (click)="setMode(1)">Wiki</button>
  <button class="btn bg-info" (click)="setMode(2)">Public Falsehoods</button>

  <div *ngIf="mode==1" [innerHTML]="mainInst.contents | marked">

  </div>
  <div *ngIf="mode==2">
    <app-public-falsehood-search></app-public-falsehood-search>
  </div>
</div>

</div>

<div *ngIf="token.credit >= 35">

  <label>Name</label>
  <input type="text" [(ngModel)]="editName">

  <textarea [(ngModel)]="editContents"></textarea>


  <div [innerHTML]="editContents | marked"></div>

  <button class="btn bg-info" (click)="addNewInst()">Submit</button>
  <button class="btn bg-info" (click)="stopCreateNew()">Cancel</button>
</div>